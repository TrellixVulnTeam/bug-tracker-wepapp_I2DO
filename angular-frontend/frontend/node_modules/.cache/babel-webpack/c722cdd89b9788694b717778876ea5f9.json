{"ast":null,"code":"import _asyncToGenerator from \"/home/geri/Documents/angular-frontend/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/priority/priority.service\";\nimport * as i3 from \"src/app/services/ticket/ticket.service\";\nimport * as i4 from \"@ng-bootstrap/ng-bootstrap\";\n\nfunction AddTicketComponent_button_46_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function AddTicketComponent_button_46_Template_button_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const prio_r7 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.setPriority(prio_r7);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const prio_r7 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" Type: \", prio_r7.priorityType, \" | Importance: \", prio_r7.importance, \" (higher the more important) \");\n  }\n}\n\nfunction AddTicketComponent_ng_template_61_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"span\", 31);\n    i0.ɵɵlistener(\"mouseenter\", function AddTicketComponent_ng_template_61_Template_span_mouseenter_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const date_r10 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.hoveredDate = date_r10;\n    })(\"mouseleave\", function AddTicketComponent_ng_template_61_Template_span_mouseleave_0_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.hoveredDate = null;\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const date_r10 = ctx.$implicit;\n    const focused_r11 = ctx.focused;\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"focused\", focused_r11)(\"range\", ctx_r6.isRange(date_r10))(\"faded\", ctx_r6.isHovered(date_r10) || ctx_r6.isInside(date_r10));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", date_r10.day, \" \");\n  }\n}\n\nexport class AddTicketComponent {\n  constructor(router, priorityService, ticketService, calendar) {\n    this.router = router;\n    this.priorityService = priorityService;\n    this.ticketService = ticketService;\n    this.calendar = calendar;\n    this.hoveredDate = null;\n    this.toDate = null;\n    this.selectedStatus = \"\";\n    const navigation = this.router.getCurrentNavigation();\n\n    if (navigation) {\n      this.project = navigation.extras.state ? navigation.extras.state.project : 0;\n    } //On page refresh, the state is lost along with the object so I reroute the user back to projects \n\n\n    if (this.project.id == null) {\n      this.router.navigateByUrl(\"/projects\");\n    }\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.priorities = yield _this.priorityService.getPriorities().toPromise();\n      _this.fromDate = _this.calendar.getToday();\n      _this.toDate = _this.calendar.getNext(_this.calendar.getToday(), 'd', 10);\n    })();\n  }\n\n  setPriority(priority) {\n    this.selectedPriority = priority;\n  }\n\n  setStatus(status) {\n    this.selectedStatus = status;\n  }\n\n  onAddTicket(addTicketForm) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      var _a, _b;\n\n      const ticketTitle = (_a = addTicketForm.form.get('ticket_title')) === null || _a === void 0 ? void 0 : _a.value;\n      const ticketDesc = (_b = addTicketForm.form.get('ticket_desc')) === null || _b === void 0 ? void 0 : _b.value; //apparently months start at 0 in js so we need to take 1 away....\n\n      const startedDate = new Date(_this2.fromDate.year, _this2.fromDate.month - 1, _this2.fromDate.day);\n      let userId = localStorage.getItem(\"user_id\") ? Number(localStorage.getItem(\"user_id\")) : 0;\n\n      if (_this2.toDate !== null) {\n        const deadline = new Date(_this2.toDate.year, _this2.toDate.month - 1, _this2.toDate.day);\n        alert(`Ticket title: ${ticketTitle}\\n Ticket desc: ${ticketDesc}\\n deadline: ${deadline}\\n date started: ${startedDate}\n      \\n ticker prio: ${_this2.selectedPriority.priorityType}\\n status: ${_this2.selectedStatus}\\n project: ${_this2.project.id}`);\n        let newTicket = {\n          ticketTitle: ticketTitle,\n          ticketDesc: ticketDesc,\n          ticketCreated: startedDate,\n          deadline: deadline,\n          status: _this2.selectedStatus,\n          ticketPriority: {},\n          id: 0,\n          project: {},\n          submitUser: {},\n          assignedUser: {},\n          comments: [],\n          ticketHistory: [],\n          tags: []\n        };\n\n        _this2.ticketService.addTicket(_this2.selectedPriority.id, _this2.project.id, userId, newTicket).subscribe(response => {\n          alert(\"Ticket Added\");\n\n          _this2.router.navigateByUrl('tickets/ticket', {\n            state: {\n              ticket: response\n            }\n          });\n        }, error => {\n          alert(error.message);\n        });\n      } else {\n        alert(\"Deadline not selected\");\n      }\n    })();\n  }\n\n  onDateSelection(date) {\n    if (!this.fromDate && !this.toDate) {\n      this.fromDate = date;\n    } else if (this.fromDate && !this.toDate && date.after(this.fromDate)) {\n      this.toDate = date;\n    } else {\n      this.toDate = null;\n      this.fromDate = date;\n    }\n  }\n\n  isHovered(date) {\n    return this.fromDate && !this.toDate && this.hoveredDate && date.after(this.fromDate) && date.before(this.hoveredDate);\n  }\n\n  isInside(date) {\n    return this.toDate && date.after(this.fromDate) && date.before(this.toDate);\n  }\n\n  isRange(date) {\n    return date.equals(this.fromDate) || this.toDate && date.equals(this.toDate) || this.isInside(date) || this.isHovered(date);\n  }\n\n}\n\nAddTicketComponent.ɵfac = function AddTicketComponent_Factory(t) {\n  return new (t || AddTicketComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.PriorityService), i0.ɵɵdirectiveInject(i3.TicketService), i0.ɵɵdirectiveInject(i4.NgbCalendar));\n};\n\nAddTicketComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AddTicketComponent,\n  selectors: [[\"app-add-ticket\"]],\n  decls: 69,\n  vars: 13,\n  consts: [[1, \"content\"], [1, \"container-fluid\"], [1, \"row\"], [1, \"col-md-12\"], [1, \"card\"], [1, \"card-header\", \"card-header-primary\"], [1, \"card-title\"], [1, \"card-body\"], [3, \"ngSubmit\"], [\"addTicketForm\", \"ngForm\"], [1, \"form-group\"], [1, \"bmd-label-floating\"], [\"type\", \"text\", \"ngModel\", \"\", \"name\", \"ticket_title\", \"required\", \"\", \"maxlength\", \"50\", 1, \"form-control\"], [\"input\", \"\"], [\"type\", \"text\", \"ngModel\", \"\", \"name\", \"ticket_desc\", \"required\", \"\", \"maxlength\", \"1000\", 1, \"form-control\"], [1, \"col-md-2\"], [\"ngbDropdown\", \"\", 1, \"d-inline-block\"], [\"id\", \"priorityDropDown\", \"ngbDropdownToggle\", \"\", \"type\", \"button\", 1, \"btn\", \"btn-outline-primary\"], [\"ngbDropdownMenu\", \"\", \"aria-labelledby\", \"priorityDropDown\"], [\"ngbDropdownItem\", \"\", 3, \"click\"], [\"align-items\", \"center\", 1, \"col-md-2\", \"center\"], [\"text-align\", \"center\", \"vertical-align\", \"middle\", 1, \"bmd-label-floating\", \"center\"], [\"ngbDropdownItem\", \"\", \"type\", \"button\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"align-items\", \"center\", 1, \"col-md-4\", \"center\"], [\"ngModel\", \"\", \"name\", \"ticket_deadline\", \"outsideDays\", \"hidden\", 1, \"btn\", \"btn-primary\", \"btn-link\", \"btn-sm\", 3, \"displayMonths\", \"dayTemplate\", \"dateSelect\"], [\"dp\", \"\"], [\"t\", \"\"], [1, \"text-primary\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"pull-right\", 3, \"disabled\"], [1, \"clearfix\"], [\"ngbDropdownItem\", \"\", \"type\", \"button\", 3, \"click\"], [1, \"custom-day\", \"btn\", \"btn-primary\", \"btn-link\", \"btn-sm\", 3, \"mouseenter\", \"mouseleave\"]],\n  template: function AddTicketComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r15 = i0.ɵɵgetCurrentView();\n\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"div\", 2);\n      i0.ɵɵelementStart(3, \"div\", 3);\n      i0.ɵɵelementStart(4, \"div\", 4);\n      i0.ɵɵelementStart(5, \"div\", 5);\n      i0.ɵɵelementStart(6, \"h4\", 6);\n      i0.ɵɵtext(7, \"Create Ticket\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\", 7);\n      i0.ɵɵelementStart(9, \"form\", 8, 9);\n      i0.ɵɵlistener(\"ngSubmit\", function AddTicketComponent_Template_form_ngSubmit_9_listener() {\n        i0.ɵɵrestoreView(_r15);\n\n        const _r0 = i0.ɵɵreference(10);\n\n        return ctx.onAddTicket(_r0);\n      });\n      i0.ɵɵelementStart(11, \"div\", 2);\n      i0.ɵɵelementStart(12, \"div\", 3);\n      i0.ɵɵelementStart(13, \"div\", 10);\n      i0.ɵɵelementStart(14, \"label\", 11);\n      i0.ɵɵtext(15, \"Ticket Title\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(16, \"input\", 12, 13);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"div\", 2);\n      i0.ɵɵelementStart(19, \"div\", 3);\n      i0.ɵɵelementStart(20, \"div\", 10);\n      i0.ɵɵelementStart(21, \"label\", 11);\n      i0.ɵɵtext(22, \"Ticket Description\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(23, \"input\", 14, 13);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"div\", 2);\n      i0.ɵɵelementStart(26, \"div\", 15);\n      i0.ɵɵelementStart(27, \"div\", 16);\n      i0.ɵɵelementStart(28, \"button\", 17);\n      i0.ɵɵtext(29, \" Status \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"div\", 18);\n      i0.ɵɵelementStart(31, \"button\", 19);\n      i0.ɵɵlistener(\"click\", function AddTicketComponent_Template_button_click_31_listener() {\n        return ctx.setStatus(\"OPEN\");\n      });\n      i0.ɵɵtext(32, \" Open \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(33, \"button\", 19);\n      i0.ɵɵlistener(\"click\", function AddTicketComponent_Template_button_click_33_listener() {\n        return ctx.setStatus(\"CLOSED\");\n      });\n      i0.ɵɵtext(34, \" Closed \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(35, \"button\", 19);\n      i0.ɵɵlistener(\"click\", function AddTicketComponent_Template_button_click_35_listener() {\n        return ctx.setStatus(\"ONHOLD\");\n      });\n      i0.ɵɵtext(36, \" On Hold \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(37, \"div\", 20);\n      i0.ɵɵelementStart(38, \"label\", 21);\n      i0.ɵɵtext(39);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(40, \"div\", 2);\n      i0.ɵɵelementStart(41, \"div\", 15);\n      i0.ɵɵelementStart(42, \"div\", 16);\n      i0.ɵɵelementStart(43, \"button\", 17);\n      i0.ɵɵtext(44, \" Priority \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(45, \"div\", 18);\n      i0.ɵɵtemplate(46, AddTicketComponent_button_46_Template, 2, 2, \"button\", 22);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(47, \"div\", 23);\n      i0.ɵɵelementStart(48, \"label\", 21);\n      i0.ɵɵtext(49);\n      i0.ɵɵelement(50, \"br\");\n      i0.ɵɵtext(51);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(52, \"div\", 20);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(53, \"div\", 2);\n      i0.ɵɵelementStart(54, \"div\", 3);\n      i0.ɵɵelementStart(55, \"div\", 10);\n      i0.ɵɵelementStart(56, \"label\", 11);\n      i0.ɵɵtext(57, \"Ticket Start & Deadline\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(58, \"div\");\n      i0.ɵɵelementStart(59, \"ngb-datepicker\", 24, 25);\n      i0.ɵɵlistener(\"dateSelect\", function AddTicketComponent_Template_ngb_datepicker_dateSelect_59_listener($event) {\n        return ctx.onDateSelection($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(61, AddTicketComponent_ng_template_61_Template, 2, 7, \"ng-template\", null, 26, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelement(63, \"hr\");\n      i0.ɵɵelementStart(64, \"pre\", 27);\n      i0.ɵɵtext(65);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(66, \"button\", 28);\n      i0.ɵɵtext(67, \" Update Ticket \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(68, \"div\", 29);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(10);\n\n      const _r5 = i0.ɵɵreference(62);\n\n      i0.ɵɵadvance(39);\n      i0.ɵɵtextInterpolate1(\"Ticket Status: \", ctx.selectedStatus.toLowerCase(), \" \");\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngForOf\", ctx.priorities);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\"Ticket Priority: \", ctx == null ? null : ctx.selectedPriority == null ? null : ctx.selectedPriority.priorityType, \" \");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\" Importance level: \", ctx == null ? null : ctx.selectedPriority == null ? null : ctx.selectedPriority.importance, \" \");\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"displayMonths\", 2)(\"dayTemplate\", _r5);\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate6(\"From: \", ctx.fromDate.year, \"/\", ctx.fromDate.month, \"/\", ctx.fromDate.day, \" To: \", ctx == null ? null : ctx.toDate == null ? null : ctx.toDate.year, \"/\", ctx == null ? null : ctx.toDate == null ? null : ctx.toDate.month, \"/\", ctx == null ? null : ctx.toDate == null ? null : ctx.toDate.day, \"\\n                        \");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", !_r0.valid);\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhZGQtdGlja2V0LmNvbXBvbmVudC5jc3MifQ== */\", \".custom-day[_ngcontent-%COMP%] {\\n    text-align: center;\\n    padding: 0.185rem 0.25rem;\\n    display: inline-block;\\n    height: 2rem;\\n    width: 2rem;\\n  }\\n  .custom-day.focused[_ngcontent-%COMP%] {\\n    background-color: #e6e6e6;\\n  }\\n  .custom-day.range[_ngcontent-%COMP%], .custom-day[_ngcontent-%COMP%]:hover {\\n    background-color: rgb(2, 117, 216);\\n    color: white;\\n  }\\n  .custom-day.faded[_ngcontent-%COMP%] {\\n    background-color: rgba(2, 117, 216, 0.5);\\n  }\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZC10aWNrZXQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7RUFDRTtJQUNFLGtCQUFrQjtJQUNsQix5QkFBeUI7SUFDekIscUJBQXFCO0lBQ3JCLFlBQVk7SUFDWixXQUFXO0VBQ2I7RUFDQTtJQUNFLHlCQUF5QjtFQUMzQjtFQUNBO0lBQ0Usa0NBQWtDO0lBQ2xDLFlBQVk7RUFDZDtFQUNBO0lBQ0Usd0NBQXdDO0VBQzFDIiwiZmlsZSI6ImFkZC10aWNrZXQuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gIC5jdXN0b20tZGF5IHtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgcGFkZGluZzogMC4xODVyZW0gMC4yNXJlbTtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgaGVpZ2h0OiAycmVtO1xuICAgIHdpZHRoOiAycmVtO1xuICB9XG4gIC5jdXN0b20tZGF5LmZvY3VzZWQge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNlNmU2ZTY7XG4gIH1cbiAgLmN1c3RvbS1kYXkucmFuZ2UsIC5jdXN0b20tZGF5OmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMiwgMTE3LCAyMTYpO1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgfVxuICAuY3VzdG9tLWRheS5mYWRlZCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyLCAxMTcsIDIxNiwgMC41KTtcbiAgfVxuIl19 */\"]\n});","map":{"version":3,"sources":["/home/geri/Documents/angular-frontend/frontend/src/app/components/add-ticket/add-ticket.component.ts","/home/geri/Documents/angular-frontend/frontend/src/app/components/add-ticket/add-ticket.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { Priority } from 'src/app/interfaces/priority';\nimport { Ticket } from 'src/app/interfaces/ticket';\nimport { PriorityService } from 'src/app/services/priority/priority.service';\nimport { TicketService } from 'src/app/services/ticket/ticket.service';\nimport {NgbDateStruct, NgbCalendar, NgbDate} from '@ng-bootstrap/ng-bootstrap';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { Project } from 'src/app/interfaces/project';\n\n\n@Component({\n  selector: 'app-add-ticket',\n  templateUrl: './add-ticket.component.html',\n  styleUrls: ['./add-ticket.component.css'],\n  styles: [`\n  .custom-day {\n    text-align: center;\n    padding: 0.185rem 0.25rem;\n    display: inline-block;\n    height: 2rem;\n    width: 2rem;\n  }\n  .custom-day.focused {\n    background-color: #e6e6e6;\n  }\n  .custom-day.range, .custom-day:hover {\n    background-color: rgb(2, 117, 216);\n    color: white;\n  }\n  .custom-day.faded {\n    background-color: rgba(2, 117, 216, 0.5);\n  }\n`]\n})\nexport class AddTicketComponent implements OnInit {\n\n\n  project!: Project;\n  priorities!:Priority[];\n  selectedPriority!: Priority;\n  hoveredDate: NgbDate | null = null;\n\n  fromDate!: NgbDate;\n  toDate: NgbDate | null = null;\n\n  selectedStatus=\"\";\n\n  constructor(public router:Router, public priorityService:PriorityService, public ticketService:TicketService,private calendar: NgbCalendar) { \n    const navigation  = this.router.getCurrentNavigation();\n    if(navigation){\n     this.project = navigation.extras.state ? navigation.extras.state.project : 0;\n   }\n\n   \n\n   //On page refresh, the state is lost along with the object so I reroute the user back to projects \n   if(this.project.id==null){\n     this.router.navigateByUrl(\"/projects\");\n   }\n  }\n\n  async ngOnInit(): Promise<void> {\n    this.priorities = await this.priorityService.getPriorities().toPromise();\n    this.fromDate = this.calendar.getToday();\n    this.toDate = this.calendar.getNext(this.calendar.getToday(), 'd', 10);\n  }\n  public setPriority(priority:Priority):void{\n    this.selectedPriority=priority;\n  }\n  public setStatus(status:string):void{\n    this.selectedStatus=status;\n  }\n\n  public async onAddTicket(addTicketForm: NgForm):Promise<void>{\n    const ticketTitle = addTicketForm.form.get('ticket_title')?.value;\n    const ticketDesc = addTicketForm.form.get('ticket_desc')?.value;\n    //apparently months start at 0 in js so we need to take 1 away....\n    const startedDate = new Date(this.fromDate.year,this.fromDate.month-1,this.fromDate.day);\n    let userId= localStorage.getItem(\"user_id\") ? Number(localStorage.getItem(\"user_id\")) : 0;\n\n    if(this.toDate!==null){\n      const deadline = new Date(this.toDate.year,this.toDate.month-1,this.toDate.day);\n\n      alert(`Ticket title: ${ticketTitle}\\n Ticket desc: ${ticketDesc}\\n deadline: ${deadline}\\n date started: ${startedDate}\n      \\n ticker prio: ${this.selectedPriority.priorityType}\\n status: ${this.selectedStatus}\\n project: ${this.project.id}`);\n\n      let newTicket: Ticket = {\n        ticketTitle: ticketTitle,\n        ticketDesc: ticketDesc,\n        ticketCreated: startedDate,\n        deadline: deadline,\n        status: this.selectedStatus,\n        ticketPriority: {} as any,\n        id: 0,\n        project: {} as any,\n        submitUser: {} as any,\n        assignedUser: {} as any,\n        comments: [],\n        ticketHistory: [],\n        tags: []\n      }\n\n      this.ticketService.addTicket(this.selectedPriority.id,this.project.id,userId,newTicket).subscribe(\n        (response: Ticket)=>  {\n          alert(\"Ticket Added\")\n          this.router.navigateByUrl('tickets/ticket', { state: { ticket: response } });\n          \n        },\n        (error: HttpErrorResponse) =>{\n          alert(error.message);\n        }    \n      )\n\n\n    }else{alert(\"Deadline not selected\");}\n\n  }\n\n\n\n\n\n\n\n\n\n\n  onDateSelection(date: NgbDate) {\n    if (!this.fromDate && !this.toDate) {\n      this.fromDate = date;\n    } else if (this.fromDate && !this.toDate && date.after(this.fromDate)) {\n      this.toDate = date;\n    } else {\n      this.toDate = null;\n      this.fromDate = date;\n    }\n  }\n\n  isHovered(date: NgbDate) {\n    return this.fromDate && !this.toDate && this.hoveredDate && date.after(this.fromDate) && date.before(this.hoveredDate);\n  }\n\n  isInside(date: NgbDate) {\n    return this.toDate && date.after(this.fromDate) && date.before(this.toDate);\n  }\n\n  isRange(date: NgbDate) {\n    return date.equals(this.fromDate) || (this.toDate && date.equals(this.toDate)) || this.isInside(date) || this.isHovered(date);\n  }\n\n\n}\n","\n<div class=\"content\">\n    <div class=\"container-fluid\">\n      <div class=\"row\">\n        <div class=\"col-md-12\">\n          <div class=\"card\">\n            <div class=\"card-header card-header-primary\">\n              <h4 class=\"card-title\">Create Ticket</h4>\n            </div>\n            <div class=\"card-body\">\n              <form #addTicketForm=\"ngForm\"  (ngSubmit)=\"onAddTicket(addTicketForm)\">\n                <div class=\"row\">\n                  <div class=\"col-md-12\">\n                    <div class=\"form-group\">\n                      <label class=\"bmd-label-floating\">Ticket Title</label>\n                      <input type=\"text\" class=\"form-control\" ngModel name=\"ticket_title\" #input required maxlength=\"50\"/>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"row\">\n                  <div class=\"col-md-12\">\n                    <div class=\"form-group\">\n                      <label class=\"bmd-label-floating\"\n                        >Ticket Description</label\n                      >\n                      <input type=\"text\" class=\"form-control\"  ngModel name=\"ticket_desc\" #input required maxlength=\"1000\"/>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"row\">\n                  <div class=\"col-md-2\">\n                    <div ngbDropdown class=\"d-inline-block\">\n                      <button\n                        class=\"btn btn-outline-primary\"\n                        id=\"priorityDropDown\"\n                        ngbDropdownToggle\n                        type=\"button\"\n                      >\n                        Status\n                      </button>\n                      <div ngbDropdownMenu aria-labelledby=\"priorityDropDown\">\n                        <button ngbDropdownItem (click)=\"setStatus('OPEN')\">\n                          Open\n                        </button>\n                        <button ngbDropdownItem (click)=\"setStatus('CLOSED')\">\n                          Closed\n                        </button>\n                        <button ngbDropdownItem (click)=\"setStatus('ONHOLD')\">\n                          On Hold\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"col-md-2 center\" align-items=\"center\">\n                    <label\n                      class=\"bmd-label-floating center\"\n                      text-align=\"center\"\n                      vertical-align=\"middle\"\n                      >Ticket Status: {{this.selectedStatus.toLowerCase()}}\n                    </label>\n                  </div>\n                </div>\n                <div class=\"row\">\n                  <div class=\"col-md-2\">\n                    <div ngbDropdown class=\"d-inline-block\">\n                      <button\n                        class=\"btn btn-outline-primary\"\n                        id=\"priorityDropDown\"\n                        ngbDropdownToggle\n                        type=\"button\"\n                      >\n                        Priority\n                      </button>\n                      <div ngbDropdownMenu aria-labelledby=\"priorityDropDown\">\n                        <button ngbDropdownItem *ngFor=\"let prio of priorities\" (click)=\"setPriority(prio)\" type=\"button\">\n                          Type: {{prio.priorityType}} | Importance: {{prio.importance}} (higher the more important)\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"col-md-4 center\" align-items=\"center\">\n                    <label\n                      class=\"bmd-label-floating center\"\n                      text-align=\"center\"\n                      vertical-align=\"middle\"\n                      >Ticket Priority: {{this?.selectedPriority?.priorityType}} <br> Importance level:  {{this?.selectedPriority?.importance}}\n                    </label>\n                  </div>\n                  <div class=\"col-md-2 center\" align-items=\"center\">\n                    \n                  </div>\n\n                  \n                </div>\n                <div class=\"row\">\n                    <div class=\"col-md-12\">\n                      <div class=\"form-group\">\n                        <label class=\"bmd-label-floating\"\n                          >Ticket Start & Deadline</label\n                        >\n                        <div></div>\n                        <ngb-datepicker class=\"btn btn-primary btn-link btn-sm\" #dp ngModel name=\"ticket_deadline\"\n                        [displayMonths]=\"2\" [dayTemplate]=\"t\" outsideDays=\"hidden\" (dateSelect)=\"onDateSelection($event)\"></ngb-datepicker>\n                        <ng-template #t let-date let-focused=\"focused\">\n                          <span class=\"custom-day btn btn-primary btn-link btn-sm\"\n                                [class.focused]=\"focused\"\n                                [class.range]=\"isRange(date)\"\n                                [class.faded]=\"isHovered(date) || isInside(date)\"\n                                (mouseenter)=\"hoveredDate = date\"\n                                (mouseleave)=\"hoveredDate = null\">\n                            {{ date.day }}\n                          </span>\n                        </ng-template>\n                        <hr>\n                        <pre class=\"text-primary\">From: {{this.fromDate.year}}/{{this.fromDate.month}}/{{this.fromDate.day}} To: {{this?.toDate?.year}}/{{this?.toDate?.month}}/{{this?.toDate?.day}}\n                        </pre>\n                      </div>\n                    </div>\n                  </div>\n                <button  [disabled]=\"!addTicketForm.valid\" type=\"submit\" class=\"btn btn-primary pull-right\">\n                  Update Ticket\n                </button>\n                <div class=\"clearfix\"></div>\n              </form>\n            </div>\n          </div>\n        </div>\n  \n        <!--<div class=\"card card-stats col-md-4\">\n          </div>-->\n      </div>\n    </div>\n  </div>\n\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}