{"ast":null,"code":"import _asyncToGenerator from \"/home/geri/Documents/angular-frontend/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet EditProjectComponent = class EditProjectComponent {\n  constructor(router, priorityService, projectService) {\n    this.router = router;\n    this.priorityService = priorityService;\n    this.projectService = projectService;\n    const navigation = this.router.getCurrentNavigation();\n\n    if (navigation) {\n      this.project = navigation.extras.state ? navigation.extras.state.project : 0;\n    } //On page refresh, the state is lost along with the object so I reroute the user back to projects \n\n\n    if (this.project.id == null) {\n      this.router.navigateByUrl(\"/projects\");\n    }\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.priorities = yield _this.priorityService.getPriorities().toPromise();\n    })();\n  }\n\n  setPriority(priority) {\n    this.selectedPriority = priority;\n  }\n\n  onUpdateProject(updateProjectForm) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      var _a, _b, _c;\n\n      const projectTitle = (_a = updateProjectForm.form.get('project_title')) === null || _a === void 0 ? void 0 : _a.value;\n      const projectDescription = (_b = updateProjectForm.form.get('project_description')) === null || _b === void 0 ? void 0 : _b.value;\n      const projectOpen = (_c = updateProjectForm.form.get('project_status')) === null || _c === void 0 ? void 0 : _c.value;\n      _this2.project.projectName = projectTitle;\n      _this2.project.projectDescription = projectDescription;\n      _this2.project.projectOpen = projectOpen;\n\n      _this2.projectService.updateProject(_this2.project.id, _this2.selectedPriority.id, _this2.project).subscribe(response => {\n        alert(\"Project Updated\");\n\n        _this2.router.navigateByUrl('projects/project', {\n          state: {\n            project: response\n          }\n        });\n      }, error => {\n        alert(error.message);\n      });\n    })();\n  }\n\n};\nEditProjectComponent = __decorate([Component({\n  selector: 'app-edit-project',\n  templateUrl: './edit-project.component.html',\n  styleUrls: ['./edit-project.component.css']\n})], EditProjectComponent);\nexport { EditProjectComponent };","map":{"version":3,"sources":["/home/geri/Documents/angular-frontend/frontend/src/app/components/edit-project/edit-project.component.ts"],"names":[],"mappings":";;AACA,SAAS,SAAT,QAAkC,eAAlC;AAcA,IAAa,oBAAoB,GAAjC,MAAa,oBAAb,CAAiC;AAM/B,EAAA,WAAA,CAAmB,MAAnB,EAAyC,eAAzC,EAAiF,cAAjF,EAA8G;AAA3F,SAAA,MAAA,GAAA,MAAA;AAAsB,SAAA,eAAA,GAAA,eAAA;AAAwC,SAAA,cAAA,GAAA,cAAA;AAC/E,UAAM,UAAU,GAAI,KAAK,MAAL,CAAY,oBAAZ,EAApB;;AACC,QAAG,UAAH,EAAc;AACb,WAAK,OAAL,GAAe,UAAU,CAAC,MAAX,CAAkB,KAAlB,GAA0B,UAAU,CAAC,MAAX,CAAkB,KAAlB,CAAwB,OAAlD,GAA4D,CAA3E;AACD,KAJ2G,CAQ5G;;;AACA,QAAG,KAAK,OAAL,CAAa,EAAb,IAAiB,IAApB,EAAyB;AACvB,WAAK,MAAL,CAAY,aAAZ,CAA0B,WAA1B;AACD;AACD;;AAEI,EAAA,QAAQ,GAAA;AAAA;;AAAA;AACZ,MAAA,KAAI,CAAC,UAAL,SAAwB,KAAI,CAAC,eAAL,CAAqB,aAArB,GAAqC,SAArC,EAAxB;AADY;AAEb;;AAEM,EAAA,WAAW,CAAC,QAAD,EAAkB;AAClC,SAAK,gBAAL,GAAsB,QAAtB;AAGD;;AACY,EAAA,eAAe,CAAC,iBAAD,EAA0B;AAAA;;AAAA;;;AACpD,YAAM,YAAY,GAAG,CAAA,EAAA,GAAA,iBAAiB,CAAC,IAAlB,CAAuB,GAAvB,CAA2B,eAA3B,CAAA,MAA2C,IAA3C,IAA2C,EAAA,KAAA,KAAA,CAA3C,GAA2C,KAAA,CAA3C,GAA2C,EAAA,CAAE,KAAlE;AACA,YAAM,kBAAkB,GAAG,CAAA,EAAA,GAAA,iBAAiB,CAAC,IAAlB,CAAuB,GAAvB,CAA2B,qBAA3B,CAAA,MAAiD,IAAjD,IAAiD,EAAA,KAAA,KAAA,CAAjD,GAAiD,KAAA,CAAjD,GAAiD,EAAA,CAAE,KAA9E;AACA,YAAM,WAAW,GAAI,CAAA,EAAA,GAAA,iBAAiB,CAAC,IAAlB,CAAuB,GAAvB,CAA2B,gBAA3B,CAAA,MAA4C,IAA5C,IAA4C,EAAA,KAAA,KAAA,CAA5C,GAA4C,KAAA,CAA5C,GAA4C,EAAA,CAAE,KAAnE;AACA,MAAA,MAAI,CAAC,OAAL,CAAa,WAAb,GAAyB,YAAzB;AACA,MAAA,MAAI,CAAC,OAAL,CAAa,kBAAb,GAAgC,kBAAhC;AACA,MAAA,MAAI,CAAC,OAAL,CAAa,WAAb,GAAyB,WAAzB;;AAGA,MAAA,MAAI,CAAC,cAAL,CAAoB,aAApB,CAAkC,MAAI,CAAC,OAAL,CAAa,EAA/C,EAAkD,MAAI,CAAC,gBAAL,CAAsB,EAAxE,EAA2E,MAAI,CAAC,OAAhF,EAAyF,SAAzF,CACG,QAAD,IAAqB;AACnB,QAAA,KAAK,CAAC,iBAAD,CAAL;;AACA,QAAA,MAAI,CAAC,MAAL,CAAY,aAAZ,CAA0B,kBAA1B,EAA8C;AAAE,UAAA,KAAK,EAAE;AAAE,YAAA,OAAO,EAAE;AAAX;AAAT,SAA9C;AAED,OALH,EAMG,KAAD,IAA6B;AAC3B,QAAA,KAAK,CAAC,KAAK,CAAC,OAAP,CAAL;AACD,OARH;AAToD;AAsBrD;;AAnD8B,CAAjC;AAAa,oBAAoB,GAAA,UAAA,CAAA,CALhC,SAAS,CAAC;AACT,EAAA,QAAQ,EAAE,kBADD;AAET,EAAA,WAAW,EAAE,+BAFJ;AAGT,EAAA,SAAS,EAAE,CAAC,8BAAD;AAHF,CAAD,CAKuB,CAAA,EAApB,oBAAoB,CAApB;SAAA,oB","sourcesContent":["import { HttpErrorResponse } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { Priority } from 'src/app/interfaces/priority';\nimport { Project } from 'src/app/interfaces/project';\nimport { Role } from 'src/app/interfaces/role';\nimport { PriorityService } from 'src/app/services/priority/priority.service';\nimport { ProjectService } from 'src/app/services/project/project.service';\n\n@Component({\n  selector: 'app-edit-project',\n  templateUrl: './edit-project.component.html',\n  styleUrls: ['./edit-project.component.css']\n})\nexport class EditProjectComponent implements OnInit {\n\n\n  project !: Project;\n  priorities!:Priority[];\n  selectedPriority!: Priority;\n  constructor(public router:Router, public priorityService:PriorityService, public projectService:ProjectService) {\n    const navigation  = this.router.getCurrentNavigation();\n     if(navigation){\n      this.project = navigation.extras.state ? navigation.extras.state.project : 0;\n    }\n\n    \n\n    //On page refresh, the state is lost along with the object so I reroute the user back to projects \n    if(this.project.id==null){\n      this.router.navigateByUrl(\"/projects\");\n    }\n   }\n\n  async ngOnInit(): Promise<void> {\n    this.priorities = await this.priorityService.getPriorities().toPromise();\n  }\n\n  public setPriority(priority:Priority):void{\n    this.selectedPriority=priority;\n    \n\n  }\n  public async onUpdateProject(updateProjectForm: NgForm):Promise<void>{\n    const projectTitle = updateProjectForm.form.get('project_title')?.value;\n    const projectDescription = updateProjectForm.form.get('project_description')?.value;\n    const projectOpen =  updateProjectForm.form.get('project_status')?.value;\n    this.project.projectName=projectTitle;\n    this.project.projectDescription=projectDescription;\n    this.project.projectOpen=projectOpen;\n    \n\n    this.projectService.updateProject(this.project.id,this.selectedPriority.id,this.project).subscribe(\n      (response: Project)=>  {\n        alert(\"Project Updated\")\n        this.router.navigateByUrl('projects/project', { state: { project: response } });\n        \n      },\n      (error: HttpErrorResponse) =>{\n        alert(error.message);\n      }    \n    )\n    \n\n\n  }\n\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}