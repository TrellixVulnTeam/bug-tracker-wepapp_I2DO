{"ast":null,"code":"import _asyncToGenerator from \"/home/geri/Documents/angular-frontend/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/ticket/ticket.service\";\nimport * as i2 from \"src/app/services/project/project.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"./cards/stat-card/stat-card.component\";\nimport * as i6 from \"./cards/graph-card/graph-card.component\";\nimport * as i7 from \"@swimlane/ngx-charts\";\nimport * as i8 from \"./mini-tickets-menu-card/mini-tickets-menu-card.component\";\n\nfunction DashBoardComponent_tr_37_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵelementStart(10, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function DashBoardComponent_tr_37_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const ticket_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.openTicket(ticket_r1);\n    });\n    i0.ɵɵelementStart(11, \"i\", 19);\n    i0.ɵɵtext(12, \"visibility\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ticket_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ticket_r1.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ticket_r1.ticketTitle);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ticket_r1.submitUser.userName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.datepipe.transform(ticket_r1.deadline, \"yyyy-MM-dd\"), \" \");\n  }\n}\n\nexport let DashBoardComponent = /*#__PURE__*/(() => {\n  class DashBoardComponent {\n    constructor(ticketService, projectService, router, datepipe) {\n      this.ticketService = ticketService;\n      this.projectService = projectService;\n      this.router = router;\n      this.datepipe = datepipe;\n      this.view = [400, 200];\n      this.showLegend = false;\n      this.showLabels = true;\n      this.doughnut = true;\n    }\n\n    ngOnInit() {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        _this.ticketsByPriority = yield _this.ticketService.getTicketsCountByPriority().toPromise();\n        _this.projectsByPriority = yield _this.projectService.getProjectsCountByPriority().toPromise();\n        _this.projectsByActiveTickets = yield _this.projectService.getActiveTicketsCountForAllProjects().toPromise();\n        _this.allAndFinishedTickets = yield _this.ticketService.getTicketsCountAllAndFnished().toPromise();\n        _this.allProjectCount = yield _this.projectService.getAllProjectsCount().toPromise();\n        const userId = localStorage.getItem(\"user_id\");\n        if (userId) _this.userAssignedAndCreatedTicketsCount = yield _this.ticketService.getUserAssignedAndCreatedTicketsCount(Number(userId)).toPromise();\n        _this.tickets = yield _this.ticketService.getTicketsOfProjectsWithUser(0, \"created\", \"all\", 0).toPromise();\n      })();\n    }\n\n    openTicket(ticket) {\n      this.router.navigateByUrl('tickets/ticket', {\n        state: {\n          ticket: ticket\n        }\n      });\n    }\n\n  }\n\n  DashBoardComponent.ɵfac = function DashBoardComponent_Factory(t) {\n    return new (t || DashBoardComponent)(i0.ɵɵdirectiveInject(i1.TicketService), i0.ɵɵdirectiveInject(i2.ProjectService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.DatePipe));\n  };\n\n  DashBoardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DashBoardComponent,\n    selectors: [[\"app-dash-board\"]],\n    decls: 38,\n    vars: 22,\n    consts: [[1, \"content\"], [1, \"container-fluid\"], [1, \"row\"], [1, \"col-lg-3\", \"col-md-6\", \"col-sm-6\", 3, \"cardIcon\", \"cardCategory\", \"cardTitle\"], [1, \"col-md-4\", 3, \"items\", \"cardTitle\"], [1, \"col-md-4\"], [1, \"card\"], [1, \"card-header\", \"card-header-success\"], [1, \"areachart-wrapper\"], [3, \"view\", \"results\", \"legend\", \"labels\", \"doughnut\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"col-lg-6\", \"col-md-12\"], [1, \"card-header\", \"card-header-warning\"], [1, \"card-body\", \"table-responsive\"], [1, \"table\", \"table-hover\"], [1, \"text-warning\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", \"rel\", \"tooltip\", \"title\", \"View ticket\", 1, \"btn\", \"btn-primary\", \"btn-link\", \"btn-sm\", 3, \"click\"], [1, \"material-icons\"]],\n    template: function DashBoardComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelement(3, \"app-stat-card\", 3);\n        i0.ɵɵelement(4, \"app-stat-card\", 3);\n        i0.ɵɵelement(5, \"app-stat-card\", 3);\n        i0.ɵɵelement(6, \"app-stat-card\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 2);\n        i0.ɵɵelement(8, \"app-graph-card\", 4);\n        i0.ɵɵelement(9, \"app-graph-card\", 4);\n        i0.ɵɵelementStart(10, \"div\", 5);\n        i0.ɵɵelementStart(11, \"div\", 6);\n        i0.ɵɵelementStart(12, \"div\", 7);\n        i0.ɵɵelementStart(13, \"div\", 8);\n        i0.ɵɵelement(14, \"ngx-charts-pie-chart\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 10);\n        i0.ɵɵelementStart(16, \"h4\", 11);\n        i0.ɵɵtext(17, \"Projects By Open Tickets\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\", 2);\n        i0.ɵɵelement(19, \"app-mini-tickets-menu-card\", 12);\n        i0.ɵɵelementStart(20, \"div\", 12);\n        i0.ɵɵelementStart(21, \"div\", 6);\n        i0.ɵɵelementStart(22, \"div\", 13);\n        i0.ɵɵelementStart(23, \"h4\", 11);\n        i0.ɵɵtext(24, \"Newest Tickets\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"div\", 14);\n        i0.ɵɵelementStart(26, \"table\", 15);\n        i0.ɵɵelementStart(27, \"thead\", 16);\n        i0.ɵɵelementStart(28, \"th\");\n        i0.ɵɵtext(29, \"ID\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"th\");\n        i0.ɵɵtext(31, \"Ticket Title\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"th\");\n        i0.ɵɵtext(33, \"Made By\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"th\");\n        i0.ɵɵtext(35, \"Created\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"tbody\");\n        i0.ɵɵtemplate(37, DashBoardComponent_tr_37_Template, 13, 4, \"tr\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"cardIcon\", \"view_list\")(\"cardCategory\", \"All Projects Count\")(\"cardTitle\", ctx.allProjectCount.toString());\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"cardIcon\", \"task\")(\"cardCategory\", \"Complete/All Tickets\")(\"cardTitle\", ctx.allAndFinishedTickets[1] + \" / \" + ctx.allAndFinishedTickets[0]);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"cardIcon\", \"add\")(\"cardCategory\", \"You assigned tickets Count\")(\"cardTitle\", ctx.userAssignedAndCreatedTicketsCount[0].toString());\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"cardIcon\", \"add\")(\"cardCategory\", \"Your Created Tickets Count\")(\"cardTitle\", ctx.userAssignedAndCreatedTicketsCount[1].toString());\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"items\", ctx.ticketsByPriority)(\"cardTitle\", \"Tickets By Priority Level\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"items\", ctx.projectsByPriority)(\"cardTitle\", \"Projects By Priority Level\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"view\", ctx.view)(\"results\", ctx.projectsByActiveTickets)(\"legend\", ctx.showLegend)(\"labels\", ctx.showLabels)(\"doughnut\", ctx.doughnut);\n        i0.ɵɵadvance(23);\n        i0.ɵɵproperty(\"ngForOf\", ctx.tickets);\n      }\n    },\n    directives: [i5.StatCardComponent, i6.GraphCardComponent, i7.PieChartComponent, i8.MiniTicketsMenuCardComponent, i4.NgForOf],\n    styles: [\"\"]\n  });\n  return DashBoardComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}